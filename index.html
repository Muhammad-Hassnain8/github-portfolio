<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Muhammad Hassnain | Cybersecurity Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Orbitron:wght@400;500;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <style>
        /* --- THEME: PERMANENT CYBERPUNK --- */
        body {
            margin: 0; padding: 0;
            background-color: #020202;
            color: #00ff00; /* Terminal Green */
            font-family: 'Share Tech Mono', monospace;
            overflow-x: hidden;
            position: relative;
        }

        /* --- REALISTIC CRT EFFECTS --- */
        
        /* 1. Screen Vignette (Screen Hood) */
        .vignette {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle, rgba(0,0,0,0) 60%, rgba(0,0,0,0.7) 100%);
            pointer-events: none; z-index: 900;
            pointer-events: none;
        }

        /* 2. Film Grain (Noise) */
        .film-grain {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 899;
            opacity: 0.07; /* Subtle noise */
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3C/feColorMatrix%3E");
        }

        /* 3. Screen Curvature (Barrel Distortion) */
        .screen-curve {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            box-shadow: inset 0 0 100px rgba(0,0,0,0.9);
            pointer-events: none;
            z-index: 900;
        }

        /* Scanlines (Flickering) */
        .scanlines {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0) 50%);
            background-size: 100% 4px;
            pointer-events: none; z-index: 900;
            opacity: 0.2;
            animation: scrollScan 8s linear infinite;
        }

        @keyframes scrollScan {
            0% { background-position: 0 0; }
            100% { background-position: 0 4px; }
        }

        /* --- MAIN STYLING (Advanced) --- */
        :root {
            --bg-color: #050505;
            --surface-color: rgba(0, 20, 0, 0.7);
            --text-main: #00ff00;
            --text-muted: #008f11;
            --accent: #00f3ff; /* Cyan Accent */
            --accent-secondary: #ff0055;
            --border-color: rgba(0, 255, 65, 0.3);
            --font-display: 'Orbitron', sans-serif;
        }

        /* Elements hidden during boot */
        main, .cursor-fx-container, .hud-corner, .hud-text, .heartbeat-wrapper, #audio-viz {
            opacity: 0; pointer-events: none;
            transition: opacity 0.5s ease-in;
        }
        .visible { opacity: 1; pointer-events: auto; }

        /* Text Shadow (Phosphor Glow) */
        .phosphor-text {
            text-shadow: 0 0 5px #00ff00, 0 0 10px rgba(0, 255, 0, 0.4);
        animation: flicker 0.15s infinite;
        }

        @keyframes flicker {
            0% { opacity: 0.97; }
            50% { opacity: 1; }
            100% { opacity: 0.98; }
        }

        /* --- BOOT SCREEN (Realistic) --- */
        #boot-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100vh;
            background: #000; z-index: 9999;
            padding: 40px;
            display: flex; flex-direction: column;
            align-items: flex-start;
            font-family: 'Share Tech Mono', monospace;
            color: #fff;
            box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.8);
            display: flex; /* Hidden initially by JS */
        }

        .boot-logo {
            font-size: 2rem; font-weight: bold; color: #fff; margin-bottom: 20px;
            text-shadow: 0 0 10px #00ff00;
            letter-spacing: 2px;
            font-family: 'Orbitron';
        }

        .boot-output { flex-grow: 1; width: 100%; }
        
        .boot-line {
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            font-size: 1rem;
        }

        .status-ok { color: #00ff00; margin-right: 10px; font-weight: bold; }
        .status-busy { color: #ffaa00; margin-right: 10px; font-weight: bold; animation: blink 1s infinite; }
        
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        .boot-progress {
            width: 100%; height: 20px; background: #111; border: 1px solid #333;
            margin-top: 20px; position: relative;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%; width: 0%; background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
            transition: width 0.2s linear;
        }

        /* --- CURSOR FX --- */
        #cursor-fx-container {
            position: fixed; top: 0; left: 0; width: 0; height: 0;
            z-index: 9998;
        }

        .cursor-core {
            position: fixed; width: 8px; height: 8px;
            background: #fff; pointer-events: none; z-index: 9999;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.5); /* CRT Glow */
        }

        .cursor-h-ring {
            position: fixed; width: 40px; height: 40px;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            pointer-events: none; z-index: 9998;
            transform: translate(-50%, -50%);
            transition: width 0.1s, height 0.1s;
        }

        .cursor-v-line {
            position: fixed; width: 1px; height: 20px;
            background: #fff; pointer-events: none; z-index: 9998;
            transform: translate(-50%, -50%);
        }
        
        .cursor-h-line {
            position: fixed; width: 20px; height: 1px;
            background: #fff; pointer-events: none; z-index: 9998;
            transform: translate(-50%, -50%);
        }

        /* --- NAV & UI --- */
        nav {
            position: fixed; top: 0; width: 100%; padding: 15px 50px;
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(0,0,0,0.8); z-index: 1000;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .logo { font-family: var(--font-display); font-size: 1.2rem; letter-spacing: 1px; color: #fff; }
        
        .nav-links { display: flex; gap: 30px; list-style: none; }
        .nav-links a { 
            text-decoration: none; color: #ccc; font-weight: 500; font-size: 0.9rem; 
            transition: 0.3s; text-transform: uppercase; letter-spacing: 1px;
        }
        .nav-links a:hover { color: var(--accent); text-shadow: 0 0 8px var(--accent); }

        .reboot-btn {
            padding: 10px 20px; background: transparent; border: 1px solid var(--accent);
            color: var(--accent); font-family: var(--font-display); font-size: 0.8rem;
            cursor: pointer; text-transform: uppercase; letter-spacing: 1px;
            transition: 0.2s;
        }
        .reboot-btn:hover {
            background: var(--accent); color: #000;
            box-shadow: 0 0 15px var(--accent);
        }

        /* --- LAYOUT --- */
        main { max-width: 1200px; margin: 0 auto; padding: 120px 20px 60px 20px; }
        
        section { margin-bottom: 150px; opacity: 0; transform: translateY(50px); transition: opacity 0.8s; }
        section.revealed { opacity: 1; transform: translateY(0); }
        
        h2 {
            font-family: var(--font-display); font-size: 2rem; margin-bottom: 50px;
            color: #fff; text-transform: uppercase; border-bottom: 2px solid var(--accent);
            padding-bottom: 10px; display: inline-block;
            text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
        }

        /* --- HERO --- */
        .hero { min-height: 80vh; display: flex; align-items: center; justify-content: space-between; gap: 50px; perspective: 1000px; }
        .hero-text { max-width: 600px; }
        .hero h1 { 
            font-size: 4rem; margin-bottom: 20px; color: #fff; 
            text-shadow: 2px 2px 0px #000; /* CRT Depth */
            white-space: nowrap;
        }
        .hero-tag {
            background: rgba(0, 255, 0, 0.2); border: 1px solid var(--accent);
            padding: 5px 15px; color: var(--accent); 
            font-weight: bold; font-size: 0.9rem; margin-bottom: 20px;
            display: inline-block;
            box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
        }
        
        .magnetic-wrap { display: inline-block; position: relative; }
        .btn-main {
            padding: 15px 40px; font-size: 1.1rem; font-weight: bold; color: #fff;
            background: transparent; border: 1px solid var(--accent);
            cursor: pointer; position: relative; overflow: hidden; display: block; text-align: center;
            text-decoration: none; transition: 0.2s;
            text-transform: uppercase; letter-spacing: 2px;
        }
        .btn-main::before {
            content: ''; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: 0.5s;
        }
        .btn-main:hover::before { left: 100%; }
        .btn-main:hover { 
            background: var(--accent); color: #000; 
            text-shadow: none;
        }

        .hero-visual { width: 350px; height: 350px; position: relative; display: flex; align-items: center; justify-content: center; perspective: 1000px; flex-shrink: 0; }
        .avatar-wrapper {
            width: 300px; height: 300px; position: relative; transform-style: preserve-3d; animation: float 6s ease-in-out infinite;
        }
        .avatar-circle {
            width: 100%; height: 100%; background: #222; border-radius: 50%;
            overflow: hidden; border: 2px solid var(--accent);
            transition: 0.3s;
        }
        .avatar-circle img { width: 100%; height: 100%; object-fit: cover; filter: grayscale(100%) contrast(1.2); }
        .hero-visual:hover .avatar-circle { filter: grayscale(0%); }

        /* --- CARDS (TILT) --- */
        .timeline-content, .card-item {
            background: rgba(0, 20, 0, 0.7); padding: 25px; 
            border: 1px solid var(--border-color);
            transition: transform 0.1s;
            transform-style: preserve-3d; perspective: 1000px;
            position: relative;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .timeline-content:hover, .card-item:hover {
            border-color: var(--accent);
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.15);
        }

        /* --- TIMELINE --- */
        .timeline { position: relative; max-width: 800px; margin: 0 auto; }
        .timeline::before {
            content: ''; position: absolute; left: 50%; width: 2px; height: 100%;
            background: var(--accent); transform: translateX(-50%);
        }
        .timeline-item { margin-bottom: 60px; position: relative; width: 50%; }
        .timeline-item:nth-child(odd) { left: 0; padding-right: 40px; text-align: right; }
        .timeline-item:nth-child(even) { left: 50%; padding-left: 40px; text-align: left; }
        .timeline-dot {
            position: absolute; top: 0; width: 14px; height: 14px;
            background: #000; border: 1px solid var(--accent); border-radius: 50%;
            z-index: 2;
        }
        .timeline-item:nth-child(odd) .timeline-dot { right: -7px; }
        .timeline-item:nth-child(even) .timeline-dot { left: -7px; }
        
        /* --- GRID --- */
        .grid-layout { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .card-item { text-align: center; padding: 40px 30px; }

        /* --- FOOTER --- */
        footer { text-align: center; padding: 40px; color: var(--text-muted); font-size: 0.9rem; border-top: 1px solid #333; }
    </style>
</head>
<body>

    <!-- REALISTIC CRT EFFECTS -->
    <div class="vignette"></div>
    <div class="film-grain"></div>
    <div class="screen-curve"></div>
    <div class="scanlines"></div>

    <!-- 1. KALI BOOT SCREEN -->
    <div id="boot-screen">
        <div class="boot-logo">KALI LINUX</div>
        <div class="boot-output" id="boot-text"></div>
        <div class="boot-progress">
            <div class="progress-bar"></div>
        </div>
    </div>

    <!-- 2. CURSOR FX -->
    <div id="cursor-fx-container">
        <div class="cursor-core"></div>
        <div class="cursor-h-ring"></div>
        <div class="cursor-v-line"></div>
        <div class="cursor-h-line"></div>
    </div>

    <nav>
        <div class="logo">&lt;MH /&gt;</div>
        <ul class="nav-links">
            <li><a href="#about">About</a></li>
            <li><a href="#experience">Timeline</a></li>
            <li><a href="#services">Services</a></li>
        </ul>
        <button id="mode-toggle" class="reboot-btn">Reboot System</button>
    </nav>

    <main id="main-content">
        <section id="hero" class="hero revealed">
            <div class="hero-text">
                <span class="hero-tag">Root Access Granted</span>
                <h1 class="phosphor-text">MUHAMMAD HASSNAIN</h1>
                <p class="hero-desc" style="color:var(--text-muted); font-size: 1.1rem; line-height: 1.7; margin-bottom: 40px;">
                    Cybersecurity Student at Preston University, Kohat. Specializing in Network Defense, Penetration Testing, and securing digital infrastructures against evolving threats.
                </p>
                <div style="display: flex; gap: 15px; justify-content: flex-start;">
                    <div class="magnetic-wrap">
                        <a href="#services" class="btn-main">My Services</a>
                    </div>
                </div>
            </div>
            <div class="hero-visual">
                <div class="avatar-wrapper">
                    <div class="avatar-circle">
                        <img src="https://api.dicebear.com/7.x/bottts/svg?seed=Hassnain" alt="Avatar">
                    </div>
                </div>
            </div>
        </section>

        <section id="experience" class="revealed">
            <h2>MISSION LOG</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h3 style="color:var(--accent)">Preston University Kohat</h3>
                        <p style="color:var(--text-muted); font-size:0.9rem;">2021 - Present</p>
                        <p>Pursuing Bachelor's in Cybersecurity. Focused on Cryptography, Ethical Hacking, and Network Security protocols.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h3 style="color:var(--accent)">Bug Bounty Hunter</h3>
                        <p style="color:var(--text-muted); font-size:0.9rem;">2022 - Present</p>
                        <p>Freelance vulnerability assessment for web applications. Identified critical XSS and SQL injection flaws.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <h3 style="color:var(--accent)">Network Intern</h3>
                        <p style="color:var(--text-muted); font-size:0.9rem;">Summer 2023</p>
                        <p>Assisted in configuring firewall rules and monitoring traffic using Wireshark.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="services" class="revealed">
            <h2>CAPABILITIES</h2>
            <div class="grid-layout">
                <div class="card-item">
                    <div style="font-size: 3rem; margin-bottom: 20px;">üõ°Ô∏è</div>
                    <h3 style="color:var(--accent)">Penetration Testing</h3>
                    <p style="color:var(--text-muted); margin-top:10px;">Simulating cyber attacks to identify vulnerabilities.</p>
                </div>
                <div class="card-item">
                    <div style="font-size: 3rem; margin-bottom: 20px;">üîê</div>
                    <h3 style="color:var(--accent)">Security Auditing</h3>
                    <p style="color:var(--text-muted); margin-top:10px;">Comprehensive analysis of code and infrastructure.</p>
                </div>
                <div class="card-item">
                    <div style="font-size: 3rem; margin-bottom: 20px;">üïµÔ∏è</div>
                    <h3 style="color:var(--accent)">Malware Analysis</h3>
                    <p style="color:var(--text-muted); margin-top:10px;">Dissecting malicious software to create defenses.</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2023 Muhammad Hassnain. Preston University Kohat.</p>
    </footer>

    <script>
        /* --- AUDIO ENGINE (Enhanced) --- */
        class SoundFX {
            constructor() {
                this.ctx = null;
                this.masterGain = null;
            }
            init() {
                if (!this.ctx) {
                    const AudioContext = window.AudioContext || window.webkitAudioContext;
                    this.ctx = new AudioContext();
                    this.masterGain = this.ctx.createGain();
                    this.masterGain.gain.value = 0.05; // Lower volume
                    this.masterGain.connect(this.ctx.destination);
                }
            }
            // Sine wave beep
            playBeep() {
                if (!this.ctx) return;
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.type = 'sine';
                osc.frequency.setValueAtTime(1200, this.ctx.currentTime);
                gain.gain.setValueAtTime(0.1, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + 0.1);
                osc.connect(gain);
                gain.connect(this.masterGain);
                osc.start(this.ctx.currentTime);
                osc.stop(this.ctx.currentTime + 0.1);
            }
            
            // White noise for typing
            playType() {
                if (!this.ctx) return;
                const bufferSize = this.ctx.sampleRate * 0.1; // 100ms
                const buffer = this.ctx.createBuffer(1, bufferSize, this.ctx.sampleRate, this.ctx.sampleRate, "make-buffer");
                const data = buffer.getChannelData(0);
                
                // Fill with white noise
                for (let i = 0; i < bufferSize; i++) {
                    data[i] = (Math.random() * 2 - 1) * 0.1; // -0.1 to 0.1 amplitude
                }
                
                const source = this.ctx.createBufferSource();
                source.buffer = buffer;
                const gain = this.ctx.createGain();
                gain.gain.value = 0.05;
                gain.connect(this.masterGain);
                source.connect(gain);
                source.start();
                source.stop(this.ctx.currentTime + 0.05); // Short burst
            }

            // High freq static
            playStatic() {
                if (!this.ctx) return;
                const bufferSize = this.ctx.sampleRate * 0.05; // Short burst
                const buffer = this.ctx.createBuffer(1, bufferSize, this.ctx.sampleRate, this.ctx.sampleRate, "make-buffer");
                const data = buffer.getChannelData(0);
                for (let i = 0; i < bufferSize; i++) {
                    data[i] = (Math.random() * 2 - 1) * 0.05; 
                }
                const source = this.ctx.createBufferSource();
                source.buffer = buffer;
                const gain = this.ctx.createGain();
                gain.gain.value = 0.02; // Very subtle
                gain.connect(this.masterGain);
                source.connect(gain);
                source.start();
                source.stop(this.ctx.currentTime + 0.05);
            }

            // Mechanical Click
            playClick() {
                if (!this.ctx) return;
                const osc = this.ctx.createOscillator();
                const gain = this.ctx.createGain();
                osc.type = 'triangle'; 
                osc.frequency.setValueAtTime(200, this.ctx.currentTime);
                gain.gain.setValueAtTime(0.2, this.ctx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, this.ctx.currentTime + 0.05);
                osc.connect(gain);
                gain.connect(this.masterGain);
                osc.start(this.ctx.currentTime);
                osc.stop(this.ctx.currentTime + 0.05);
            }
        }
        const sfx = new SoundFX();

        /* --- KALI BOOT SEQUENCE LOGIC --- */
        const bootScreen = document.getElementById('boot-screen');
        const bootText = document.getElementById('boot-text');
        const progressBar = document.querySelector('.progress-bar');
        const mainContent = document.getElementById('main-content');
        const rebootBtn = document.getElementById('mode-toggle');
        let isBooted = false;

        const bootMessages = [
            "Loading Linux Kernel v5.15.0-kali9...",
            "Verifying DMI Pool Data...",
            "DMI 2.7 Present...",
            "CPU 1 @ 2.90GHz...",
            "Memory Test... PASS",
            "Loading [ ok ] Linux...",
            "Mounting /proc...",
            "Starting Network...",
            "Boot successful.",
            "INIT: 0x12345678",
            "login: root"
        ];

        function runBootSequence() {
            bootScreen.style.display = 'flex';
            mainContent.style.opacity = '0';
            progressBar.style.width = '0%';
            
            let lineIndex = 0;
            const interval = setInterval(() => {
                if(lineIndex < bootMessages.length) {
                    const div = document.createElement('div');
                    div.className = 'boot-line';
                    div.innerHTML = `<span class="status-ok">[ OK ]</span> ${bootMessages[lineIndex]}`;
                    bootText.appendChild(div);
                    bootText.scrollTop = bootText.scrollHeight;
                    
                    // Random progress updates
                    const progress = ((lineIndex + 1) / bootMessages.length) * 100;
                    progressBar.style.width = progress + '%';
                    
                    lineIndex++;
                } else {
                    clearInterval(interval);
                    sfx.init(); // Init audio on boot interaction
                    setTimeout(() => {
                        sfx.playBeep();
                        sfx.playType();
                        progressBar.style.width = '100%';
                        progressBar.style.backgroundColor = '#fff';
                        setTimeout(() => {
                            finishBoot();
                        sfx.playClick();
                        progressBar.style.backgroundColor = '#00ff00';
                        progressBar.style.boxShadow = '0 0 10px #00ff00';
                        progressBar.innerText = "SYSTEM ONLINE";
                    }, 500);
                    }, 800);
                }
            }, 300); // Speed of typing
        }

        function finishBoot() {
            setTimeout(() => {
                bootScreen.style.opacity = '0';
                setTimeout(() => {
                    bootScreen.style.display = 'none';
                    mainContent.style.opacity = '1';
                }, 500);
            }, 1000); // Hold black screen briefly
        }

        // Run on load
        window.addEventListener('load', runBootSequence);
        
        // Run on button
        rebootBtn.addEventListener('click', runBootSequence);

        /* --- CURSOR LOGIC --- */
        const cursorContainer = document.getElementById('cursor-fx-container');
        const core = document.querySelector('.cursor-core');
        const hRing = document.querySelector('.cursor-h-ring');
        const vLine = document.querySelector('.cursor-v-line');
        const hLine = document.querySelector('.cursor-h-line');

        document.addEventListener('mousemove', (e) => {
            core.style.left = e.clientX + 'px';
            core.style.top = e.clientY + 'px';
            hRing.style.left = (e.clientX - 20) + 'px';
            hRing.style.top = (e.clientY - 20) + 'px';
            vLine.style.left = (e.clientX - 10) + 'px';
            vLine.style.top = e.clientY + 'px';
            hLine.style.left = e.clientX + 'px';
            hLine.style.top = (e.clientY - 10) + 'px';
        });

        // --- SCROLL REVEAL --- */
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if(entry.isIntersecting) {
                    entry.target.classList.add('revealed');
                }
            });
        }, { threshold: 0.1 });
        document.querySelectorAll('section').forEach(el => observer.observe(el));

        /* --- CANVAS (Matrix Rain + Particles) --- */
        const canvas = document.createElement('canvas');
        document.body.appendChild(canvas);
        canvas.id = "canvas-bg";
        const ctx = canvas.getContext('2d');
        let animationId;
        let particles = [];
        let matrixChars = "01";

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        const fontSize = 14;
        const columns = canvas.width / fontSize;
        const drops = [];
        for(let x = 0; x < columns; x++) drops[x] = 1;

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
                this.size = Math.random() * 2 + 1;
            }
            update() {
                this.x += this.vx; this.y += this.vy;
                if(this.x < 0 || this.x > canvas.width) this.vx *= -1;
                if(this.y < 0 || this.y > canvas.height) this.vy *= -1;
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(0, 255, 0, 0.5)';
                ctx.fill();
            }
        }
        for(let i=0; i<30; i++) particles.push(new Particle());

        function drawMatrix() {
            ctx.font = fontSize + 'px monospace';
            for(let i = 0; i < drops.length; i++) {
                const text = matrixChars.charAt(Math.floor(Math.random() * matrixChars.length));
                ctx.fillStyle = 'rgba(0, 255, 0, 0.3)';
                ctx.fillText(text, i*fontSize, drops[i]*fontSize);
                if(drops[i]*fontSize > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            }
        }

        function animate() {
            // Fade trail effect
            ctx.fillStyle = 'rgba(5, 5, 5, 0.3)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            drawMatrix();

            particles.forEach((p, index) => {
                p.update(); p.draw();
                for(let j=index; j<particles.length; j++) {
                    const dx = particles[j].x - p.x;
                    const dy = particles[j].y - p.y;
                    const distance = Math.sqrt(dx*dx + dy*dy);
                    if(distance < 120) { 
                        ctx.beginPath();
                        ctx.strokeStyle = 'rgba(0, 255, 0, 0.1)';
                        ctx.lineWidth = 1;
                        ctx.moveTo(p.x, p.y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                    }
                }
            });
            animationId = requestAnimationFrame(animate);
        }
        
        animate();

    </script>
</body>
</html>
